var W=Object.defineProperty;var t=(r,e)=>W(r,"name",{value:e,configurable:!0});import{createInterface as H}from"node:readline/promises";import{emitKeypressEvents as O}from"node:readline";var h=process.stdin,U=process.stdout,x=t(r=>{var e=H({input:h,output:U,...r});O(h,e),h.isTTY&&h.setRawMode(!0);var a=t(()=>{h.isTTY&&h.setRawMode(!1),e.close()},"close");return[e,a]},"create");var B=t((r,e)=>{if(!Array.isArray(r))throw new TypeError(`cli: ${e} of type (${r?.constructor?.name}), expected (Array)`)},"checkarr"),b=t((r,e)=>{if(typeof r!="function")throw new TypeError(`cli: ${e} of type (${r?.constructor?.name}), expected (Function)`)},"checkfn"),l=t((r,e="str")=>{if(typeof r!="string")throw new TypeError(`cli: ${e} of type (${r?.constructor?.name}), expected (String)`)},"checkstr");var T=t((r,e,a=!1)=>{if(typeof r!="number")throw new TypeError(`cli: ${e} of type (${r?.constructor?.name}), expected (Number)`);if(!Number.isInteger(r)||r<(a?0:1))throw new TypeError(`cli: ${e} is (${r}), expected positive integer`)},"checkpInt");var g=t((r,e)=>{if(typeof r!="number")throw new TypeError(`cli: ${e} of type (${r?.constructor?.name}), expected (Number)`)},"checknb");var j=process.stdout,E=t((r,e="",a={})=>new Promise(s=>{var{completer:n,trim:o,validate:m,prompt:p}={completer:v=>[[],v],trim:!0,validate:null,prompt:"> ",...a};l(r,"message"),l(p,"prompt"),b(n,"completer"),m!==null&&b(m,"validate");var[i,f]=x({completer:n,prompt:p});j.write(r),r.endsWith(`
`)&&i.prompt(),i.on("line",v=>{if(o&&(v=v.trim()),m&&!m(v))return console.error("unvalid answer"),i.prompt();f(),s(v||e)})}),"ask");var P=process.stdin,w=process.stdout,S=t((r,e={})=>new Promise(a=>{var{replacement:s}={replacement:"*",...e};l(r,"message"),l(s,"replacement");var n=r.split(`
`),[o,m]=x({prompt:n[n.length-1],historySize:0});w.write(r);var p=t((i,f)=>{f.name!=="return"&&(w.clearLine(0),o.prompt(),w.write(s.repeat(o.line.length)),o.cursor=o.line.length)},"keypress");P.on("keypress",p),o.on("line",i=>{m(),P.off("keypress",p),a(i)})}),"password");import{PassThrough as z}from"node:stream";var hr=process.stdin,N=process.stdout,A=t(r=>new Promise(e=>{l(r,"message");var a=r.split(`
`),[s,n]=x({prompt:a[a.length-1],output:z});N.write(r),s.on("line",o=>{n(),N.write(`
`),e(o)})}),"hidden");var L=process.stdin,y=process.stdout,M=t((r,e={})=>new Promise(a=>{var{initial:s,min:n,max:o,float:m,step:p}={initial:0,min:0,max:100,float:!1,step:1,...e};l(r,"message"),g(s,"initial"),g(n,"min"),g(o,"max"),g(p,"step");var i=r.split(`
`),[f,v]=x({prompt:i[i.length-1]});y.write(r);var c=s,u=t(($,d)=>{d.name!=="return"&&(d.name==="up"||d.name==="right"?c+=p:d.name==="down"||d.name==="left"?c-=p:c=Number(f.line),c=Number.isNaN(c)?s:Math.max(n,Math.min(o,c)),f.line=String(c),y.clearLine(0),f.prompt(),y.write(f.line),f.cursor=f.line.length)},"keypress");L.on("keypress",u),f.on("line",$=>{v(),L.off("keypress",u),a($)})}),"number");import{PassThrough as q}from"node:stream";var C=process.stdin,I=process.stdout,R=t(r=>new Promise(e=>{l(r,"message"),r+="(y/n)";var a=r.split(`
`),[s,n]=x({prompt:a[a.length-1],output:q});I.write(r);var o=t(p=>{n(),I.write(`
`),C.off("keypress",m),e(p)},"handle"),m=t((p,i)=>{i.name==="return"&&o(!0),i.name==="y"&&o(!0),i.name==="n"&&o(!1)},"keypress");C.on("keypress",m)}),"confirm");var Q=t((r=!1,e,a)=>r===!1?"\x1B["+e+"m":"\x1B["+e+"m"+r+"\x1B["+a+"m","format");var D=t((r=!1)=>Q(r,34,39),"blue");var F=t(r=>(T(r,"line"),"\x1B["+r+"F"),"prevLine");var G="\x1B[0J";import{PassThrough as V}from"node:stream";var K=process.stdin,k=process.stdout,Y=t(r=>k.write(F(r)+G),"clearScrean"),_=t((r,e,a,s)=>k.write(r.map((n,o)=>a+(o===e?s(n):n)).join(`
`)),"logChoices"),J=t((r,e,a={})=>new Promise(s=>{var{prefix:n,formatSelect:o}={prefix:"  -",formatSelect:D};l(r,"message"),l(n,"prefix"),B(e,"choices"),b(o,"formatSelect");var m=r.split(`
`),p=0,[i,f]=x({prompt:m[m.length-1],output:V});k.write(r+`
`),_(e,0,n,o);var v=t((c,u)=>{(u.name==="up"||u.name==="right")&&(p=Math.max(0,p-1)),(u.name==="down"||u.name==="left")&&(p=Math.min(e.length-1,p+1)),Y(e.length-1),_(e,p,n,o)},"keypress");K.on("keypress",v),i.on("line",c=>{f(),K.off("keypress",v),Y(e.length-1),console.log(e[p]),s(e[p])})}),"select");var qr={ask:E,password:S,hidden:A,number:M,confirm:R,select:J};export{E as ask,R as confirm,qr as default,A as hidden,M as number,S as password,J as select};
