var H=Object.defineProperty;var t=(r,e)=>H(r,"name",{value:e,configurable:!0});import{createInterface as O}from"node:readline/promises";import{emitKeypressEvents as U}from"node:readline";var h=process.stdin,j=process.stdout,x=t(r=>{var e=O({input:h,output:j,...r});U(h,e),h.isTTY&&h.setRawMode(!0);var a=t(()=>{h.isTTY&&h.setRawMode(!1),e.close()},"close");return[e,a]},"create");var T=t((r,e)=>{if(!Array.isArray(r))throw new TypeError(`cli: ${e} of type (${r?.constructor?.name}), expected (Array)`)},"checkarr"),g=t((r,e)=>{if(typeof r!="function")throw new TypeError(`cli: ${e} of type (${r?.constructor?.name}), expected (Function)`)},"checkfn"),l=t((r,e="str")=>{if(typeof r!="string")throw new TypeError(`cli: ${e} of type (${r?.constructor?.name}), expected (String)`)},"checkstr");var E=t((r,e,a=!1)=>{if(typeof r!="number")throw new TypeError(`cli: ${e} of type (${r?.constructor?.name}), expected (Number)`);if(!Number.isInteger(r)||r<(a?0:1))throw new TypeError(`cli: ${e} is (${r}), expected positive integer`)},"checkpInt");var w=t((r,e)=>{if(typeof r!="number")throw new TypeError(`cli: ${e} of type (${r?.constructor?.name}), expected (Number)`)},"checknb");var z=process.stdout,P=t((r,e="",a={})=>new Promise(n=>{var{completer:s,trim:o,validate:m,prompt:p}={completer:v=>[[],v],trim:!0,validate:null,prompt:"> ",...a};l(r,"message"),l(p,"prompt"),g(s,"completer"),m!==null&&g(m,"validate");var[i,f]=x({completer:s,prompt:p});z.write(r),r.endsWith(`
`)&&i.prompt(),i.on("line",v=>{if(o&&(v=v.trim()),m&&!m(v))return console.error("unvalid answer"),i.prompt();f(),n(v||e)})}),"ask");var S=process.stdin,y=process.stdout,N=t((r,e={})=>new Promise(a=>{var{replacement:n}={replacement:"*",...e};l(r,"message"),l(n,"replacement");var s=r.split(`
`),[o,m]=x({prompt:s[s.length-1],historySize:0});y.write(r);var p=t((i,f)=>{f.name!=="return"&&(y.clearLine(0),o.prompt(),y.write(n.repeat(o.line.length)),o.cursor=o.line.length)},"keypress");S.on("keypress",p),o.on("line",i=>{m(),S.off("keypress",p),a(i)})}),"password");import{PassThrough as q}from"node:stream";var dr=process.stdin,A=process.stdout,L=t(r=>new Promise(e=>{l(r,"message");var a=r.split(`
`),[n,s]=x({prompt:a[a.length-1],output:q});A.write(r),n.on("line",o=>{s(),A.write(`
`),e(o)})}),"hidden");var M=process.stdin,k=process.stdout,C=t((r,e={})=>new Promise(a=>{var{initial:n,min:s,max:o,float:m,step:p}={initial:0,min:0,max:100,float:!1,step:1,...e};l(r,"message"),w(n,"initial"),w(s,"min"),w(o,"max"),w(p,"step");var i=r.split(`
`),[f,v]=x({prompt:i[i.length-1]});k.write(r);var c=n,u=t((B,b)=>{b.name!=="return"&&(b.name==="up"||b.name==="right"?c+=p:b.name==="down"||b.name==="left"?c-=p:c=Number(f.line),c=Number.isNaN(c)?n:Math.max(s,Math.min(o,c)),f.line=String(c),k.clearLine(0),f.prompt(),k.write(f.line),f.cursor=f.line.length)},"keypress");M.on("keypress",u),f.on("line",B=>{v(),M.off("keypress",u),a(B)})}),"number");import{PassThrough as Q}from"node:stream";var I=process.stdin,R=process.stdout,D=t(r=>new Promise(e=>{l(r,"message"),r+="(y/n)";var a=r.split(`
`),[n,s]=x({prompt:a[a.length-1],output:Q});R.write(r);var o=t(p=>{s(),R.write(`
`),I.off("keypress",m),e(p)},"handle"),m=t((p,i)=>{i.name==="return"&&o(!0),i.name==="y"&&o(!0),i.name==="n"&&o(!1)},"keypress");I.on("keypress",m)}),"confirm");var V=t((r=!1,e,a)=>r===!1?"\x1B["+e+"m":"\x1B["+e+"m"+r+"\x1B["+a+"m","format");var F=t((r=!1)=>V(r,34,39),"blue");var G=t(r=>(E(r,"line"),"\x1B["+r+"F"),"prevLine");var K="\x1B[0J";import{PassThrough as X}from"node:stream";var Y=process.stdin,$=process.stdout,_=t(r=>$.write(G(r)+K),"clearScrean"),J=t((r,e,a,n)=>$.write(r.map((s,o)=>a+(o===e?n(s):s)).join(`
`)),"logChoices"),W=t((r,e,a={})=>new Promise(n=>{var{prefix:s,formatSelect:o}={prefix:"  -",formatSelect:F};l(r,"message"),l(s,"prefix"),T(e,"choices"),g(o,"formatSelect");var m=r.split(`
`),p=0,[i,f]=x({prompt:m[m.length-1],output:X});$.write(r+`
`),J(e,0,s,o);var v=t((c,u)=>{(u.name==="up"||u.name==="right")&&(p=Math.max(0,p-1)),(u.name==="down"||u.name==="left")&&(p=Math.min(e.length-1,p+1)),_(e.length-1),J(e,p,s,o)},"keypress");Y.on("keypress",v),i.on("line",c=>{f(),Y.off("keypress",v),_(e.length-1),console.log(e[p]),n(e[p])})}),"select");var d={ask:P,password:N,hidden:L,number:C,confirm:D,select:W};globalThis.$cli?($cli.prompt=d,$cli.ask=d.ask):globalThis.$cli={prompt:d,ask:d.ask};var Xr=d;export{P as ask,D as confirm,Xr as default,L as hidden,C as number,N as password,W as select};
