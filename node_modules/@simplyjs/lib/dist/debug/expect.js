var b=Object.defineProperty;var n=(s,e)=>b(s,"name",{value:e,configurable:!0});var a=class extends Error{constructor(e){super(),this.name="assertion",this.message=e}};n(a,"AssertionError");var l=n((s,e="str")=>{if(typeof s!="string")throw new TypeError(`expect: ${e} of type (${s?.constructor?.name}), expected (String)`)},"checkstr"),p=n((s,e="fn")=>{if(typeof s!="function")throw new TypeError(`expect: ${e} of type (${s?.constructor?.name}), expected (Function)`)},"checkfn"),v=n((s,e,t=!0)=>{if(typeof s!="number")throw new TypeError(`expect: ${e} of type (${s?.constructor?.name}), expected (Number)`);if(!Number.isInteger(s)||s<=(t?-1:0))throw new TypeError(`expect: ${e} is (${s}), expected positive integer`)},"checkpInt"),y=n((s,e)=>{throw new TypeError(`expect: ${e} of type (${s?.constructor?.name}), expected (String) or (Function)`)},"throwNotStrOrFun"),d=n((s,e)=>{if(typeof s!="string"&&!(s instanceof RegExp))throw new TypeError(`expect: ${e} of type (${s?.constructor?.name}), expected (String) or (RegExp)`)},"checkstrOrReg");var i=n((s,e,t)=>{if(l(e,"message"),!!s===t)throw new a(e.replace("#not ",t?"not ":""))},"assert"),g=n((s,e,t)=>{throw new a(`expected (${s}) to be equal to (${e}) at (${t.join(".")})`)},"throwNotEq"),c=n((s,e,t,r=!0,u=[])=>{if(typeof s!="object"||s===null)return Object.is(s,e)?!0:(r&&g(s,e,u),!1);if(s instanceof Date)return e instanceof Date&&Number(s)===Number(e)?!0:(r&&g(s,e,u),!1);if(s instanceof RegExp)return e instanceof RegExp&&String(s)===String(e)?!0:(r&&g(s,e,u),!1);if(s instanceof Error)return e instanceof Error&&s.message===e.message&&s.name===e.name?!0:(r&&g(s,e,u),!1);if(t&&Object.keys(s).length!==Object.keys(e).length){if(r)throw new a(`expected keys (${Object.keys(s).join(",")}) to be same as (${Object.keys(e).join(",")}) at (${u.join(".")})`);return!1}return Object.keys(e).every(f=>c(s[f],e[f],t,r,u.concat(f)))},"deepEq");var h=class{constructor(e){this.value=e,this.negated=!1,this.deep=!1,this.strict=!1,this._own=!1}get to(){return this}get be(){return this}get and(){return this}get that(){return this}get which(){return this}get is(){return this}get has(){return this}get have(){return this}get but(){return this}get of(){return this}get not(){return this.negated=!0,this}get deeply(){return this.deep=!0,this}get strictly(){return this.strict=!0,this}get own(){return this._own=!0,this}type(e,t){return typeof e=="string"?i(typeof this.value===e,t||`value of type (${typeof this.value}), expected #not (${e})`,this.negated):typeof e=="function"?i(this.value instanceof e,t||`value of type (${this.value?.constructor?.name}), expected #not (${e.name})`,this.negated):y(e,"type"),this.negated=!1,this}a(e,t){return this.type(e,t)}an(e){return this.type(e,msg)}string(e){return this.type("string",e)}number(e){return this.type("number",e)}boolean(e){return this.type("boolean",e)}true(e){this.eq(!0,e)}false(e){this.eq(!1,e)}null(e){return this.eq(null,e)}undefined(e){return this.eq(void 0,e)}function(e){return this.type("function",e)}object(e){return i(typeof this.value=="object"&&this.value!==null,e||`value of type (${this.value===null?null:typeof this.value}), expected #not object`,this.negated),this.negated=!1,this}array(e){return this.type(Array,e)}date(e){return this.type(Date,e)}regExp(e){return this.type(RegExp,e)}bigInt(e){return this.type("bigint",e)}symbol(e){return this.type("symbol",e)}promise(e){return this.type(Promise,e)}primitive(e){return i(this.value===null||typeof this.value!="object"&&typeof this.value!="function",e||`expected (${this.value}) to #not be primitive`,this.negated),this.negated=!1,this}truthy(e){return i(!!this.value,e||`expected (${this.value}) to be truthy`,!1),this.negated=!1,this}falsy(e){return i(!this.value,e||`expected (${this.value}) to be falsy`,!1),this.negated=!1,this}defined(e){return this.not.eq(void 0,e)}nill(e){return i(this.value===void 0||this.value===null,e||`value of type (${typeof this.value}), expected #not nill`,this.negated),this.negated=!1,this}nan(e){return this.eq(NaN,e)}int(e){return i(Number.isInteger(this.value),e||`expected (${this.value}) to be integer`,!1),this.negated=!1,this}float(e){return i(!Number.isInteger(this.value),e||`expected (${this.value}) to be float`,!1),this.negated=!1,this}finite(e){return i(Number.isFinite(this.value),e||`expected (${this.value}) to be finite`,!1),this.negated=!1,this}infinite(e){return i(!Number.isFinite(this.value),e||`expected (${this.value}) to be infinite`,!1),this.negated=!1,this}arrayBuffer(e){return this.type(ArrayBuffer,e)}typedArray(e){return this.type(TypedArray,e)}error(e){return this.type(Error,e)}map(e){return this.type(Map,e)}set(e){return this.type(Set,e)}weakMap(e){return this.type(WeakMap,e)}weakSet(e){return this.type(weakSet,e)}eq(e,t){return this.deep?this.negated?i(c(this.value,e,this.strict,!1),t||`expected (${this.value}) to not be ${this.strict?"strictly ":""}deeply equal to (${e})`,!0):c(this.value,e,this.strict):i(Object.is(this.value,e),t||`expected (${this.value}) to #not be equal to (${e})`,this.negated),this.negated=!1,this.deep=!1,this.strict=!1,this}equal(e,t){return this.eq(e,t)}oneOf(...e){var t=(this.strict?"strictly ":"")+(this.deep?"deeply ":"");return i(e.some(r=>this.deep?c(this.value,r,this.strict,!1):Object.is(this.value,r)),`expected (${this.value}) to #not be ${t}one of (${e.join(", ")})`,this.negated),this.negated=!1,this.deep=!1,this.strict=!1,this}key(e,t){l(e,"name");var r=this.negated;return this.not.nill(),this._own?i(Object.hasOwn(this.value,e),t||`expected (${this.value}) to #not have own property (${e})`,r):i(this.value[e]!==void 0,t||`expected (${this.value}) to #not have (${e})`,r),this._own=!1,this}prop(e,t){return this.key(e,t),new h(this.value[e])}property(e,t){return this.key(e,t),new h(this.value[e])}keys(...e){var t=this.negated,r=this._own;return e.forEach(u=>{this.negated=t,this._own=r,this.key(u)}),this}ownPropertyDescriptor(e,t){l(e,"name"),this.negated=!1,this.key(e);var r=Object.getOwnPropertyDescriptor(this.value,e);return"value"in t&&i(r.value===t.value,`expected (${r.value}) to be equal to (${t.value})`,!1),"configurable"in t&&i(r.configurable===t.configurable,`configurable of (${e}) is (${r.configurable}), expected (${t.configurable})`,!1),"writable"in t&&i(r.writable===t.writable,`writable of (${e}) is (${r.writable}), expected (${t.writable})`,!1),"enumerable"in t&&i(r.enumerable===t.enumerable,`enumerable of (${e}) is (${r.enumerable}), expected (${t.enumerable})`,!1),"get"in t&&i(r.get===t.get,`getter of (${e}) is (${r.get}), expected (${t.get})`,!1),"set"in t&&i(r.set===t.set,`setter of (${e}) is (${r.set}), expected (${t.set})`,!1),this}frozen(e){return i(Object.isFrozen(this.value),e||`expected (${this.value}) to #not be frozen`,this.negated),this.negated=!1,this}sealed(e){return i(Object.isSealed(this.value),e||`expected (${this.value}) to #not be sealed`,this.negated),this.negated=!1,this}gt(e,t){return i(this.value>e,t||`expected (${this.value}) to #not be greater than (${e})`,this.negated),this.negated=!1,this}lt(e,t){return i(this.value<e,t||`expected (${this.value}) to #not be less than (${e})`,this.negated),this.negated=!1,this}greaterThan(e,t){return this.gt(e,t)}lessThan(e,t){return this.lt(e,t)}above(e,t){return this.gt(e,t)}below(e,t){return this.lt(e,t)}between(e,t,r){return i(this.value>e&&this.value<t,r||`expected (${this.value}) to #not be between (${e}) and (${t})`,this.negated),this.negated=!1,this}startsWith(e,t){l(e,"str");var r=this.negated;return this.negated=!1,this.type("string"),i(this.value.startsWith(e),t||`expected (${this.value}) to #not start with (${e})`,r),this}endsWith(e,t){l(e,"str");var r=this.negated;return this.negated=!1,this.type("string"),i(this.value.endsWith(e),t||`expected (${this.value}) to #not end with (${e})`,r),this}match(e,t){d(e,"pattern");var r=this.negated;return this.negated=!1,this.type("string"),i(!!this.value.match(e),t||`expected (${this.value}) to #not be matched with (${e})`,r),this}includes(...e){var t=this.negated;return this.negated=!1,this.type(Array),i(t?!e.some(r=>this.value.includes(r)):e.every(r=>this.value.includes(r)),`expected (${this.value}) to #not include (${e.join(", ")})`,!1),this}length(e,t){return v(e,"len"),i(this.value.length===e,t||`(${this.value}) of length (${this.value.length}), expected #not (${e})`,this.negated),this.negated=!1,this}empty(e){return this.length(0,e)}throw(e=Error,t="",r,...u){p(e,"type"),d(t,"message matcher");var f=this.negated;this.negated=!1,this.type("function");var o;try{this.value(...u)}catch(w){o=w}var x=o?`, throwed (${o.name}: ${o.message})`:"";return i(o&&o instanceof e&&o.message.match(t),r||`expected (${this.value.name}) to #not throw a (${e.name})${t?" of message ("+t+")":""}${x}`,f),this}resolve(e=()=>{},t){return p(e,"resolver"),this.type(Promise),this.value.then(e),this.value.catch(r=>{throw new a(t||`expected value to resolve, rejected with (${r?.name}: ${r?.message})`)}),this}reject(e=()=>{},t){return p(e,"rejecter"),this.type(Promise),this.value.then(r=>{throw new a(t||`expected value to reject, resolved with (${r})`)}),this.value.catch(e),this}satisfy(e){p(e,"fn");var[t,r]=e(this.value,this);return i(t,r,this.negated),this.negated=!1,this}};n(h,"ChainedAssertion");var $=n(s=>new h(s),"expect");Object.defineProperty(Object.prototype,"$must",{get:function(){return new h(this)}});Object.defineProperty(Object.prototype,"$should",{get:function(){return new h(this)}});globalThis.$expect=$;$expect.ChainedAssertion=h;$expect.AssertionError=a;var _=$;export{a as AssertionError,h as ChainedAssertion,_ as default,$ as expect};
