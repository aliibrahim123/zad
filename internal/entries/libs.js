var Ht=Object.defineProperty;var o=(e,t)=>Ht(e,"name",{value:t,configurable:!0});import{L as v}from"./chunks/node-BKieyWgd.js";function An(e,t=!1){if(typeof e=="string")return e[0]==="<"?yt(e):e[0].match(/[a-z]/)?[document.createElement(e)]:Array.from(document.querySelectorAll(e));if(e instanceof Element)return[e];if(Array.isArray(e))return e;if(e?.length!==void 0)return Array.from(e);if(t)throw new TypeError(`cannot convert ${e?.constructor?.name} to Element[]`);return[]}o(An,"from");function P(e,t=document){return Array.from(t.querySelectorAll(e))}o(P,"query");function $n(e,...t){const n=document.createElement(e);for(const i in t)Y(n,t[i]);return n}o($n,"create");function Y(e,t){if(typeof t=="string")t[0]==="#"?e.id=t.slice(1):t[0]==="."?e.classList.add(t.slice(1)):e.append(t);else if(t instanceof Node)e.append(t);else if(Array.isArray(t))for(const n of t)Y(e,n);else if(typeof t=="function")Y(e,t(e));else if(typeof t=="object"&&t!==null)for(const n in t)if(n==="classList")e.classList.add(...t.classList);else if(n==="style")for(const i in t.style)e.style.setProperty(i,t.style[i]);else if(n==="attrs")for(const i in t.attrs)e.setAttribute(i,String(t.attrs[i]));else if(n==="events")for(const i in t.events)e.addEventListener(i,t.events[i]);else e[n]=t[n]}o(Y,"apply");function yt(e,t=!1){const n=document.createElement("div");n.innerHTML=e;const i=Array.from(t?n.childNodes:n.children);return n.replaceChildren(),Array.from(i)}o(yt,"construct");function Sn(e){const t=document.createElement("div");t.innerHTML=e;const n=t.children[0];return t.replaceChildren(),n}o(Sn,"constructOne");class g{static{o(this,"Event")}#t=[];on(t){return this.#t.push(t),this}off(t){return this.#t=this.#t.filter(n=>n!==t),this}trigger(...t){for(const n of this.#t)n(...t);return this}once(t){const n=o((...i)=>{t(...i),this.off(n)},"fn");return this.#t.push(n),this}async awaitForIt(){return new Promise(t=>this.once((...n)=>t(n)))}}class j{static{o(this,"OTIEvent")}#t=[];#e=!1;#n=void 0;on(t){return this.#e?t(...this.#n):this.#t.push(t),this}off(t){return this.#t=this.#t.filter(n=>n!==t),this}trigger(...t){for(const n of this.#t)n(...t);return this.#e=!0,this.#n=t,this.#t=[],this}once(t){return this.on(t),this}async awaitForIt(){return new Promise(t=>this.on((...n)=>t(n)))}}const _t=new g,jt=new g,Vt=new g,Zt=new g,Gt=new g,Jt=new g,Kt=new g;class f extends Error{static{o(this,"CompError")}constructor(t){const n=t.replaceAll("\\:","  ").indexOf(":");super(t.slice(n+1).trim());const i=t.slice(0,n);this.name=i?`neocomp (${i})`:"neocomp"}}function Qt(e){throw new f(`registry: adding exsisitng class (${e})`)}o(Qt,"throw_adding_existing_class");function Xt(e){throw new f(`registry: getting undefined class (${e})`)}o(Xt,"throw_getting_undefined_class");function Yt(e){throw new f(`registry: using undefined provider (${e})`)}o(Yt,"throw_using_undefined_provider");function te(e){throw new f(`registry: adding exsisitng provider (${e})`)}o(te,"throw_adding_existing_provider");function ee(e,t){throw new f(`registry: adding root while there is another (${$(e,"root")}, ${$(t,"adding")})`)}o(ee,"throw_adding_root_while_there");function ne(){throw new f("registry: removing root while there is no one")}o(ne,"throw_remove_unexisting_root");function $(e,t="comp"){return`${t}: ${e.constructor.name}#${e.id}`}o($,"compInfo");function ie(e){throw new f(`init: component without init function (${$(e)})`)}o(ie,"throw_no_initFn");function Q(e,t,n){throw new f(`init: incorrect init sequence (calling (${t}) at (${n}), ${$(e)})`)}o(Q,"throw_incorrect_init_sequence");function se(e,t){throw new f(`hierarchy: linking parent while already having one (${$(e)}, ${$(t,"parent")})`)}o(se,"throw_link_Parent_while_has");function oe(e){throw new f(`hierarchy: unlinking unexisting parent (${$(e)})`)}o(oe,"throw_unlink_no_parent");function re(e,t){throw new f(`hierarchy: unlinking unowned child (${$(e)}, ${$(t,"child")})`)}o(re,"throw_unlink_unowned_child");function ae(e){throw new f(`hierarchy: removing removed component (${$(e)})`)}o(ae,"throw_removing_removed_comp");function it(e,t){throw new f(`linking: linking linkable that is linked (linking: ${t.constructor.name}, ${e instanceof ct?$(e):"to: "+e.constructor.name})`)}o(it,"throw_linking_same");function st(e,t){throw new f(`linking: unlinking linkable that is not linked (linking: ${t.constructor.name}, ${e instanceof ct?$(e,"to"):"to: "+e.constructor.name})`)}o(st,"throw_unlinking_not_linked");function he(e){throw new f(`template registry: adding exsisitng template (${e})`)}o(he,"throw_adding_existing_template");function ce(e){throw new f(`template registry: getting undefined template (${e})`)}o(ce,"throw_getting_undefined_template");function fe(e){throw new f(`view: no into query while insertMode is into (${$(e)})`)}o(fe,"throw_not_into_query");function de(e,t){throw new f(`view: into query has not match (query: ${t}, ${$(e)})`)}o(de,"throw_into_query_no_match");function le(){throw new f("template parse: unexpected text in root")}o(le,"throw_text_in_root");function ue(e,t){throw new f(`template parse: top node without an id (node: ${e.tag} at ${t})`)}o(ue,"throw_top_node_no_id");function pe(e,t){throw new f(`template parse: undefined supplement type (type: ${e.tag}), node: (${e.tag}#${t})`)}o(pe,"throw_undefined_supplement_type");function ge(e){throw new f(`TAttr: unexpected unended property argumanets at attribute (${e})`)}o(ge,"throw_tattr_unended_prop_args_in_name");function we(e){throw new f(`TAttr: target is text while node has node children, expected only text (${e})`)}o(we,"throw_tattr_no_text");function lt(e,t,n){throw new f(`TAttr: unexpected token (${e}) at (${t}) of attribute (${n})`)}o(lt,"throw_tattr_unexpected_token");function D(e,t,n){throw new f(`TAttr: unexpected unended ${e?e+" ":""}expression at (${t}) of attribute (${n})`)}o(D,"throw_tattr_uneded_exp");function ut(e,t){throw new f(`TAttr: unexpected unended property arguments at (${e}) of attribute (${t})`)}o(ut,"throw_tattr_unended_prop_args");function me(e,t){throw new f(`TAttr: unexpected unended escape sequence at the end of input at (${e}) of attribute (${t})`)}o(me,"throw_tattr_escape_seq_at_end");function X(e,t,n){throw new f(`TAttr: invalid escape sequence (${e}) at (${t}) of attribute (${n})`)}o(X,"throw_tattr_invalid_escape_seq");function ye(e){throw new f(`action attributes: adding existing action attribute handler (${e})`)}o(ye,"throw_adding_existing_act_attr");function _e(e){throw new f(`action attributes: getting undefined action attribute handler (${e})`)}o(_e,"throw_getting_undefined_act_attr");function ve(){throw new f("@comp\\:this attr: detected multiple comp:this attr")}o(ve,"throw_comp_this_multiple");function ke(){throw new f("@on attr: no event arguments")}o(ke,"throw_on_attr_no_args");function vt(e){throw new f(`@${e} attr: no property arguments`)}o(vt,"throw_attr_no_props");function C(e){return e instanceof v?e.meta.get("neocomp:id"):e}o(C,"getTarget");function*kt(e){if(e instanceof v)for(const[t,n]of e.attrs)yield[t,n];else for(const t of e.attributes)yield[t.name,t.value]}o(kt,"attrsOf");function xt(e,t){return e instanceof v?e.attrs.has(t):e.hasAttribute(t)}o(xt,"hasAttr");function xe(e,t){return e instanceof v?e.attrs.get(t):e.attributes.getNamedItem(t)?.value}o(xe,"getAttr");function tt(e,t,n){if(t==="text")return St(e,n);e instanceof v?e.attrs.set(t,n):e.attributes.getNamedItem(t).value=n}o(tt,"setAttr$1");function I(e,t){e instanceof v?e.attrs.delete(t):e.removeAttribute(t)}o(I,"removeAttr");function*At(e){if(e instanceof v)for(const t of e.children)t instanceof v&&(yield t);else for(const t of e.children)yield t}o(At,"childrenOf");function Ae(e){e instanceof v?e.children=[]:e.replaceChildren()}o(Ae,"removeChildren");function $t(e){return e instanceof v?e.children.some(t=>t instanceof v)?void 0:e.children[0]:e.childElementCount===0?e.innerText:void 0}o($t,"getText");function St(e,t){e instanceof v?e.children=[t]:e.innerText=t}o(St,"setText");class bt{static{o(this,"SerializedFn")}constructor(t,n){this.args=t,this.source=n}}function N(e,t,n){return e.serialize?new bt(t,n):new Function(...t,n)}o(N,"toFun");function z(e,t){return t.inDom?e.replaceAll(/-[^-]/g,n=>n[1].toUpperCase()).replaceAll("--","-"):e}o(z,"decodeAttrArg");const $e=Object.freeze(Object.defineProperty({__proto__:null,SerializedFn:bt,attrsOf:kt,childrenOf:At,decodeAttrArg:z,getAttr:xe,getTarget:C,getText:$t,hasAttr:xt,removeAttr:I,removeChildren:Ae,setAttr:tt,setText:St,toFun:N},Symbol.toStringTag,{value:"Module"})),Se=/[\\@#$]/;function be(e,t,n,i){if(e[0]==="{"){e.at(-1)!=="}"&&D("",0,t);let d=e.slice(1,-1);return d=d.includes(";")?d:"return "+d,i.length===2?new Function(d):N(n,i,d)}let s=0,r=[],c=[];for(;s<e.length;){const d=e.slice(s).match(Se)?.index;if(r.push(e.slice(s,d===void 0?e.length:s+d)),d===void 0)break;s+=d;const p=e[s];if(p==="\\")w();else if(p==="#"){if(e[s+1]!=="{"){r.push("#"),s++;continue}const y=e[s+2]==="{",l=e.indexOf(y?"}}":"}",s);l===-1&&D("constant",s,t);const A=e.slice(s+(y?3:2),l);r.push(new Function(A.includes(";")?A:"return "+A)()),s=l+(y?2:1)}else if(p==="$"){const y=e[s+1];if(y==="{"){const l=e.indexOf("}",s);l===-1&&D("static",s,t),h(),c.push({isExp:!1,prop:e.slice(s+2,l),static:!0}),s=l+1;continue}if(y!=="("){r.push("$"),s++;continue}h(),m()}else{const y=e[s+1];if(y==="{"){const l=e.indexOf("}",s);l===-1&&D("dynamic",s,t),h(),c.push({isExp:!1,prop:e.slice(s+2,l),static:!1}),s=l+1;continue}if(y!=="("){r.push("@"),s++;continue}h(),k()}}return h(),c;function h(){r.length!==0&&(c.push(r.join("")),r=[])}o(h,"addPreText");function w(){const d=e[s+1];if(s+1===e.length&&me(s,t),d==="0")r.push("\0");else if(d==="n")r.push(`
`);else if(d==="r")r.push("\r");else if(d==="v")r.push("\v");else if(d==="t")r.push("	");else if(d==="b")r.push("\b");else if(d==="f")r.push("\f");else if(d==="x"){const p=Number.parseInt(e.slice(s+2,s+4),16);Number.isNaN(p)&&X(e.slice(s,s+4),s,t),r.push(String.fromCodePoint(p)),s+=2}else if(d==="u"&&e[s+2]!=="{"){const p=Number.parseInt(e.slice(s+2,s+6),16);Number.isNaN(p)&&X(e.slice(s,s+6),s,t),r.push(String.fromCharCode(p)),s+=4}else if(d==="u"&&e[s+2]==="{"){const p=e.indexOf("}",s+2),y=Number.parseInt(e.slice(s+3,p),16);Number.isNaN(y)&&X(e.slice(s,p+1),s,t),r.push(String.fromCodePoint(y)),s=p-1}else r.push(d);s+=2}o(w,"handleEscapeSeq");function m(){const d=s,p=e.indexOf(")",s);p===-1&&ut(d,t);const y=e.slice(d+2,p).split(",").map(L=>L.trim());s=p+1,e[s]!=="{"&&lt(e[s],s,t);const l=e[s+1]==="{",A=e.indexOf(l?"}}":"}",s);A===-1&&D("static",d,t);const a=e.slice(s+(l?2:1),A),U=N(n,i.concat(y),a.includes(";")?a:"return "+a);c.push({isExp:!0,fn:U,dynamics:[],statics:y}),s=A+(l?2:1)}o(m,"handleStaticExp");function k(){const d=s,p=e.indexOf(")",s);p===-1&&ut(d,t);const y=e.slice(d+2,p).split(",").map(O=>O.trim()),l=[],A=[];for(const O of y)O[0]==="$"?l.push(O.slice(1)):A.push(O);s=p+1,e[s]!=="{"&&lt(e[s],s,t);const a=e[s+1]==="{",U=e.indexOf(a?"}}":"}",s);U===-1&&D("dynamic",d,t);const L=e.slice(s+(a?2:1),U),J=N(n,i.concat(l,A),L.includes(";")?L:"return "+L);c.push({isExp:!0,fn:J,dynamics:A,statics:l}),s=U+(a?2:1)}o(k,"handleDynamicExp")}o(be,"parseTAttr");function Te(e,t,n,i){return Array.isArray(e)?e.map(s=>typeof s=="string"?s:s.isExp?s.fn(t,n,...i.concat(s.statics.concat(s.dynamics).map(r=>t.store.get(r)))):t.store.get(s.prop)).join(""):e(t,n,...i)}o(Te,"evalTAttr");function Ee(){R("comp:this",(e,t,n)=>{new(dt(n.comp))(t).onInit.on(s=>e.addChild(s))})}o(Ee,"addCompAction");function Ce(){R("do",(e,t,n)=>{n.fn(e,t)})}o(Ce,"addDoAction");function Ie(){R("effect",(e,t,n)=>{const i=n;i.fn(e,t,...i.props.map(s=>e.store.get(s))),e.store.addEffect(i.props,()=>i.fn(e,t,...i.props.map(s=>e.store.get(s))),[],void 0,{el:t})})}o(Ie,"addEffectAction");function Ue(e){throw new f(`action: adding existing action handler (${e})`)}o(Ue,"throw_adding_existing_action");function Le(e){throw new f(`action: undefined action type (${e})`)}o(Le,"throw_undefined_action");function Oe(e,t){throw new f(`${t} action: target has no attached component (${$(e,"parent")})`)}o(Oe,"throw_no_attached_comp");function ot(e,t){e.link(t),t.link(e)}o(ot,"link");function rt(e,t){e.unlink(t),t.unlink(e)}o(rt,"unlink");class bn{static{o(this,"Resource")}constructor(t){this.onLink=new g,this.onUnlink=new g,this.#t=new Set,this.value=t}#t;link(t){this.#t.has(t)&&it(this,t),this.#t.add(t),this.onLink.trigger(this,t)}unlink(t){this.#t.has(t)||st(this,t),this.#t.delete(t),this.onUnlink.trigger(this,t)}hasLink(t){return this.#t.has(t)}unlinkAll(){for(const t of this.#t)rt(this,t)}}function pt(e,t,n,i){e.hasLink(n)||ot(e,n),e.effect([t],()=>n.set(i,e.get(t)))}o(pt,"$in");function Pe(e,t,n,i,s=(r,c)=>r===c){e.hasLink(n)||ot(e,n),e.store.addEffect([t],()=>{const r=e.get(t);s(r,n.get(i))||n.set(i,r)},[],n),n.store.addEffect([i],()=>{const r=n.get(i);s(e.get(t),r)||e.set(t,r)},[],e)}o(Pe,"$inout");function Ne(){function e(t,n){R(t,(i,s,r)=>{const c=r;setTimeout(()=>{const h=s[G];h||Oe(i,t),h.onInit.on(w=>n(c,i,w))},0)})}o(e,"addAct"),e("in",(t,n,i)=>pt(n,t.parentProp,i,t.childProp)),e("out",(t,n,i)=>pt(i,t.childProp,n,t.parentProp)),e("inout",(t,n,i)=>Pe(n,t.parentProp,i,t.childProp))}o(Ne,"addInOutActions");function Re(){R("on",(e,t,n)=>{const i=n;for(const s of i.events)t.addEventListener(s,r=>i.fn(e,t,r))})}o(Re,"addOnAction");function Me(){R("ref",(e,t,n)=>{const i=n;e.view.addRef(i.name,t)})}o(Me,"addRefAction");const et=new Map;function R(e,t){et.has(e)&&Ue(e),et.set(e,t)}o(R,"addAction");We();Ee();Me();Ce();Ie();Re();Ne();function Tt(e,t,n){const i=et.get(n.type);if(!i)return Le(n.type);i(e,t,n)}o(Tt,"doAction");function De(e,t){for(const n of t)Tt(e,n.target,n)}o(De,"doActions");function Fe(e,t,n,i){let s=0;function r(c,h){const w=h.meta.get("neocomp:id");for(;i[s]?.target===w;)Tt(e,c,i[s]),s++;if(i[s]!==void 0)for(let m=0,k=0;m<h.children.length;m++)h.children[m]instanceof v&&i[s]!==void 0&&(r(c.children[k],h.children[m]),k++)}o(r,"walk"),r(t,n)}o(Fe,"doActionsOfTemplate");const q=Symbol("neocomp:passed-args");function gt(e,t,n){const i=Te(n.template,e,t,n.staticProps.concat(n.dynamicProps).map(r=>e.store.get(r))),s=n.attr;s==="text"?t.innerText=i:s==="html"?t.innerHTML=i:s.startsWith("prop:")?t[s.slice(5)]=i:s.startsWith("class:")?t.classList.toggle(s.slice(6),!!i):s.startsWith("style:")?t.style.setProperty(s.slice(6),i):s.startsWith("arg:")?(t[q]||(t[q]={}),t[q][s.slice(4)]=i):t.setAttribute(s,i)}o(gt,"setAttr");function We(){R("attr",(e,t,n)=>{const i=n;if(gt(e,t,i),i.dynamicProps.length>0||Array.isArray(i.template)&&i.template.some(s=>typeof s!="string"&&(s.isExp?s.dynamics.length>0:!s.static))){const s=i.dynamicProps.concat();if(Array.isArray(i.template))for(const r of i.template)typeof r!="string"&&(r.isExp?s.push(...r.dynamics):r.static||s.push(r.prop));e.store.addEffect(s,()=>gt(e,t,i),[],void 0,{el:t})}})}o(We,"addAttrAction");function Be(e){throw new f(`store: adding existing property (${e})`)}o(Be,"throw_adding_existing_prop");function B(e,t,n=""){throw new f(`store: ${e} undefined property${n} (${String(t)})`)}o(B,"throw_undefined_prop");function qe(){throw new f("update dispatcher: curcular dependency detected in update batch")}o(qe,"throw_circular_dep_update");class ze{static{o(this,"Signal")}#t;#e;constructor(t,n){this.#t=t,this.#e=n}get value(){return this.#t.get(this.#e)}set value(t){this.#t.set(this.#e,t)}get prop(){return this.#e}get store(){return this.#t}get asReadOnly(){return new Et(this.#t,this.#e)}get asWriteOnly(){return new Ct(this.#t,this.#e)}}class Et{static{o(this,"ReadOnlySignal")}#t;#e;constructor(t,n){this.#t=t,this.#e=n}get value(){return this.#t.get(this.#e)}get prop(){return this.#e}get store(){return this.#t}}class Ct{static{o(this,"WriteOnlySignal")}#t;#e;constructor(t,n){this.#t=t,this.#e=n}set value(t){this.#t.set(this.#e,t)}get prop(){return this.#e}get store(){return this.#t}}class He{static{o(this,"UpdateDispatcher")}constructor(t,n={}){this.#e=new Map,this.isDispatching=!1,this.#n=[],this.#i=[],this.#o=new Set,this.#s=new Set,this.#r=new Map,this.options={...this.constructor.defaults,...n},this.#t=t.base,t.onChange.on((i,s)=>this.update(s.map(r=>r.symbol))),this.#t.onUnlink.on((i,s)=>this.remove(r=>r.from===s))}#t;#e;static{this.defaults={balance:!0}}add(t,n,i,s,r={}){const c={effectedBy:t,effect:n,handler:i,from:s,meta:r};for(const h of t)this.#e.has(h)?this.#e.get(h)?.push(c):this.#e.set(h,[c])}update(t){if(!this.options.balance){for(const n of t){const i=this.#e.get(n);if(i)for(const s of i)s.handler()}return}for(const n of t)this.#e.has(n)&&this.#a(n,!0);this.isDispatching||(this.isDispatching=!0,this.#h())}#n;#i;#o;#s;#r;#a(t,n=!1){if(this.#s.has(t)&&!n)return;this.#s.add(t);const i=this.#e.get(t);if(i){for(const s of i)if(!this.#o.has(s)){this.#o.add(s),this.#n.push(s);for(const r of s.effect)this.#r.set(r,(this.#r.get(r)||0)+1),this.#a(r)}}}#h(){let t=!1;for(;this.#n.length!==0;){for(let n=0;n<this.#n.length;n++){const i=this.#n[n];if(i.effectedBy.some(s=>{const r=this.#r.get(s);return r!==void 0&&r>0})){this.#i.push(i);continue}i.handler(),this.#o.delete(i);for(const s of i.effect)this.#r.set(s,this.#r.get(s)-1);t=!0}t||qe(),t=!1,this.#n=this.#i,this.#s=new Set,this.#i=[]}this.isDispatching=!1,this.#r=new Map}remove(t,n){if(n)for(const i of n){const s=this.#e.get(i);s&&this.#e.set(i,s.filter(r=>!t(r)))}else for(const[i,s]of this.#e)this.#e.set(i,s.filter(r=>!t(r)))}}class It{static{o(this,"Store")}constructor(t,n={}){this.#t=new Map,this.#e=new Map,this.#n=new Map,this.onAdd=new g,this.onRemove=new g,this.onChange=new g,this.#i=0,this.#o=new Set,this.options={...this.constructor.defaults,...n},this.base=t,this.dispatcher=new He(this,this.options.updateDispatcher)}#t;#e;#n;static{this.defaults={static:!1,addUndefined:!1,updateOnDefine:!0,updateOnSet:!0,updateDispatcher:{},baseProp:{name:"",symbol:Symbol("neocomp:prop(UNDEFINED)"),value:void 0,isStatic:!1,meta:{},init:void 0,setter:void 0,getter:void 0,comparator:o((t,n)=>t===n,"comparator")}}}add(t,n={}){if(this.#e.has(t)&&Be(t),this.#n.has(t)){var i=this.#n.get(t);this.#n.delete(t)}else var i=Symbol(`neocomp:prop(${t})`);const s={...this.options.baseProp,name:t,symbol:i,isStatic:this.options.static,...n};return s.meta={...s.meta},s.init&&s.init.call(s),this.#e.set(t,s),this.#t.set(i,s),this.onAdd.trigger(this,s),this.options.updateOnDefine&&this.#s(s,!0),s}get(t){const n=typeof t=="string"?this.#e.get(t):this.#t.get(t);if(n)return n.getter?n.getter.call(n):n.value}getProp(t){return typeof t=="string"?this.#e.get(t):this.#t.get(t)}getSymbolFor(t){const n=this.#e.get(t);if(n)return n.symbol;if(this.#n.has(t))return this.#n.get(t);const i=Symbol(`neocomp:prop(${t})`);return this.#n.set(t,i),i}set(t,n){let i=typeof t=="string"?this.#e.get(t):this.#t.get(t);if(!i)return this.options.addUndefined||B("setting",t),typeof t=="symbol"&&B("setting",t," by symbol"),i=this.add(t,{value:n}),this.options.updateOnSet&&!this.options.updateOnDefine&&this.#s(i),i;const s=i.value;return i.setter?i.setter.call(i,n):i.value=n,this.options.updateOnSet&&!i.isStatic&&!i.comparator(s,i.value)&&this.#s(i),i}setMultiple(t){this.startBulkUpdate();for(const n in t)this.set(n,t[n]);this.endBulkUpdate()}has(t){return typeof t=="string"?this.#e.has(t):this.#t.has(t)}remove(t){const n=typeof t=="string"?this.#e.get(t):this.#t.get(t);if(!n)return B("removing",t);this.#e.delete(n.name),this.#t.delete(n.symbol),this.onRemove.trigger(this,n)}#i;get bulkUpdating(){return this.#i>0}#o;startBulkUpdate(){this.#i++}#s(t,n=!1){if(!(!n&&t.isStatic)){if(this.bulkUpdating){this.#o.add(t);return}this.onChange.trigger(this,[t])}}endBulkUpdate(){if(this.#i--,this.#i>0)return;const t=Array.from(this.#o);this.#o=new Set,this.onChange.trigger(this,t)}forceUpdate(t){const n=typeof t=="string"?this.#e.get(t):this.#t.get(t);if(!n)return B("force updating",t);this.#s(n,!0)}updateAll(t=!0){this.startBulkUpdate();for(const[n,i]of this.#e)this.#s(i,t);this.endBulkUpdate()}initForUse(t,n){return this.has(t)?this.getProp(t).symbol:n!==void 0?this.set(t,n).symbol:typeof t=="string"?this.getSymbolFor(t):(this.#t.has(t)||B("using",t," by symbol"),t)}createSignal(t,n){return new ze(this,this.initForUse(t,n))}createROSignal(t,n){return new Et(this,this.initForUse(t,n))}createWOSignal(t,n){return new Ct(this,this.initForUse(t,n))}addEffect(t,n,i=[],s,r={}){this.dispatcher.add(t.map(c=>typeof c=="symbol"?c:this.getSymbolFor(c)),i.map(c=>typeof c=="symbol"?c:this.getSymbolFor(c)),n,s,r)}get asObject(){const t={};for(const[n,i]of this.#e)t[n]=i.value;return t}get asMap(){const t=new Map;for(const[n,i]of this.#e)t.set(n,i.value);return t}*[Symbol.iterator](){for(const[t,n]of this.#t)yield n}get propsToBeAdded(){return Array.from(this.#n.keys())}}function Ut(e){const t=document.createElement(e.tag);for(const[n,i]of e.attrs)t.setAttribute(n,String(i));e.classList.size&&t.classList.add(...e.classList);for(const n of e.children)t.append(n instanceof v?Ut(n):n);return t}o(Ut,"liteToNative");function Lt(e){const t=new v(e.tagName.toLowerCase());for(const n of e.attributes)n.name!=="class"&&t.attrs.set(n.name,n.value);t.classList=new Set(e.classList);for(const n of e.childNodes)n instanceof Text?t.append(n.textContent||""):n instanceof Element&&t.append(Lt(n));return t}o(Lt,"nativeToLite");const F=new Map;F.set("empty",{node:new v("div",{},[],{"neocomp:id":0}),actions:[]});function je(e,t){F.has(e)&&he(e),Kt.trigger(e,t),F.set(e,t)}o(je,"add$1");function Ot(e){return F.has(e)||ce(e),F.get(e)}o(Ot,"get$1");function Ve(e){return F.has(e)}o(Ve,"has$1");const Tn={add:je,get:Ot,has:Ve},Ze={rootTag:"html",keepWhiteSpace:!1,voidTags:new Set(["area","base","br","col","embed","hr","img","input","link","meta","source","track","wbr"]),selfCloseTags:new Set(["colgroup","dd","dt","li","options","p","td","tfoot","th","thead","tr"]),keepWhiteSpaceTags:new Set(["pre"]),rawTextTags:new Set(["script","style"]),onComment:o(()=>{},"onComment"),onCData:o(()=>{},"onCData"),tagStart:/^[a-zA-Z]/,tagRest:/^[a-zA-Z:0-9-]+/,lowerTag:!0,attrStart:/^[a-zA-Z:_]/,attrRest:/^[a-zA-Z:_.0-9-]+/,attrUnquoted:/^[^\s'"=<>`]+/,lowerAttr:!0};function Ge(e,t){const n={...Ze,...t},{keepWhiteSpace:i,tagStart:s,tagRest:r,lowerTag:c,attrStart:h,attrRest:w,lowerAttr:m,attrUnquoted:k,keepWhiteSpaceTags:d,rawTextTags:p}=n,y=new v(n.rootTag),l=[y];let A=0,a=0;for(;a<e.length;){const _=l.at(-1),u=_.children,x=e.indexOf(p.has(_.tag)?`</${_.tag}>`:"<",a);let S=e.slice(a,x===-1?e.length:x);if(S&&!S.match(/^\s+$/g)&&(i||A>0||p.has(_.tag)||(S=S.replaceAll(/\s+/g," ")),typeof u.at(-1)=="string"?u[u.length-1]+=S:_.append(S)),x===-1)break;a=x;const b=e[x+1];if(b==="!"&&e.slice(a,a+4)==="<!--"){J(_);continue}if(b==="!"&&e.slice(a,a+9)==="<![CDATA["){O(_);continue}if(s.test(b)){U();continue}if(b==="/"&&s.test(e[a+2])){L(_);continue}typeof u.at(-1)=="string"?u[u.length-1]+="<":_.append("<"),a++}if(l.length>1)throw new SyntaxError(`litedom.parse: ended input with ${l.length-1} unclosed tags`);return y;function U(_){let u=e.slice(a+1).match(r)?.[0];u=c?u.toLowerCase():u,a+=1+u.length,l.at(-1)?.tag===u&&n.selfCloseTags.has(u)&&l.pop();const x=new v(u);l.at(-1)?.append(x),l.push(x);let S=!1;for(;e[a]!==">"&&e[a]!=="/";){if(K()&&!S)throw new SyntaxError(`litedom.parse: expected whitespace at (${a})`);if(S=!1,e[a]===">"||e[a]==="/")break;if(!h.test(e[a]))throw new SyntaxError(`litedom.parse: expected attribute at (${a})`);const b=e.slice(a).match(w)?.[0];a+=b.length;const zt=K();if(e[a]!=="="){const T=e[a]===">"||e[a]==="/";if(!T&&zt)throw new SyntaxError(`litedom.parse: unexpected token at (${a})`);if(S=!0,x.attrs.set(m?b.toLowerCase():b,""),T)break;continue}a++,K();let M="";if(e[a]==='"'){const T=e.indexOf('"',a+1);if(T===-1)throw new SyntaxError(`litedom.parse: unexpected end of quoted attribute value at (${a})`);M=e.slice(a+1,T),a=T+1}else if(e[a]==="'"){const T=e.indexOf("'",a+1);if(T===-1)throw new SyntaxError(`litedom.parse: unexpected end of quoted attribute value at (${a})`);M=e.slice(a+1,T),a=T+1}else{if(M=e.slice(a).match(k)?.[0],!M)throw new SyntaxError(`litedom.parse: unexpected token at (${a})`);a+=M.length}x.attrs.set(m?b.toLowerCase():b,M)}x.attrs.has("class")&&(x.classList=new Set(x.attrs.get("class").split(" ")),x.attrs.delete("class")),(e[a]==="/"||n.voidTags.has(u))&&l.pop(),d.has(l.at(-1)?.tag)&&A++,a+=e[a]==="/"?2:1}function L(_){let u=e.slice(a+2).match(r)?.[0];u=c?u.toLowerCase():u;const x=e.indexOf(">");if(x===-1)throw new SyntaxError(`litedom.parse: unended end tag at (${a})`);if(!e.slice(a+2+u.length,x).match(/^\s*/))throw new SyntaxError(`litedom.parse: invalid end tag at (${a})`);if(l.length===1)throw new SyntaxError(`litedom.parse: unexpected end tag (${u}) at root at (${a})`);if(_.tag!==u)throw new SyntaxError(`litedom.parse: end tag (${u}) is different from start tag (${_.tag}) at (${a})`);d.has(u)&&A--,l.pop(),a+=3+u.length}function J(_){const u=e.indexOf("-->",a+4);if(u===-1)throw new SyntaxError(`litedom.parse: unended comment at (${a})`);n.onComment(_,e.slice(a+4,u)),a=u+3}function O(_){const u=e.indexOf("]]>",a+9);if(u===-1)throw new SyntaxError(`litedom.parse: unended comment at (${a})`);n.onComment(_,e.slice(a+9,u)),a=u+3}function K(){const _=e.slice(a).match(/^\s*/)?.[0];return a+=_.length,_.length===0}}o(Ge,"parse");function Je(){H("do",(e,t,n,i,s)=>{i.push({type:"do",target:C(e),fn:N(s,["comp","el"],n)}),I(e,t)})}o(Je,"addDoAttr");function Ke(){H("effect",(e,t,n,i,s)=>{const r=t.match(/\([^)]+\)/)?.[0];if(!r)return vt("effect");const c=z(r.slice(1,-1),s).split(",");i.push({type:"effect",target:C(e),props:c,fn:N(s,["comp","el",...c],n)}),I(e,t)})}o(Ke,"addEffectAttr");function Qe(){function e(t){H(t,(n,i,s,r,c)=>{const h=i.match(/\([^)]+\)/)?.[0];if(!h)return vt(t);const w=z(h.slice(1,-1),c);r.push({type:t,target:C(n),parentProp:w,childProp:s}),I(n,i)})}o(e,"addAttr"),e("in"),e("out"),e("inout")}o(Qe,"addInOutAttrs");function Xe(){H("on",(e,t,n,i,s)=>{const r=t.match(/\([^)]+\)/)?.[0];if(!r)return ke();const c=r.slice(1,-1).split(",");i.push({type:"on",target:C(e),events:c,fn:N(s,["comp","el","event"],n)}),I(e,t)})}o(Xe,"addOnAttr");function Ye(){H("ref",(e,t,n,i)=>{i.push({type:"ref",target:C(e),name:n}),I(e,t)})}o(Ye,"addRefAttr");const V=new Map;function H(e,t){V.has(e)&&ye(e),V.set(e,t)}o(H,"addActionAttr");function tn(e){return V.has(e)||_e(e),V.get(e)}o(tn,"getActionAttr");Ye();Je();Ke();Xe();Qe();const en={serialize:!1,inDom:!1};function at(e,t={}){return Pt(e,[],{...en,...t})}o(at,"walk");function nn(e,t,n,i,s){const r=t.indexOf("("),c=r!==-1;let h=t.slice(1,c?r:t.length);(h.startsWith("prop:")||h.startsWith("arg:"))&&(h=z(h,i));const w=[],m=[];if(c){const p=t.indexOf(")",r);p===-1&&ge(t);const y=z(t.slice(r+1,p),i).split(",");for(const l of y)l!==""&&(l[0]==="$"?w.push(l.slice(1)):m.push(l))}if(h==="text"){const p=$t(e);if(p===void 0)return we(t);n=p}const k=be(n,t,i,["comp","el"].concat(w,m)),d=!(h.startsWith("style:")||h.startsWith("prop:")||h.startsWith("class:")||h.startsWith("arg:"));d&&Array.isArray(k)&&k.every(p=>typeof p=="string")?tt(e,h,k.join("")):d&&!Array.isArray(k)&&w.length+m.length===0?tt(e,h,k()):s.push({type:"attr",target:C(e),attr:h,template:k,staticProps:w,dynamicProps:m}),I(e,t)}o(nn,"handleTAttr");function Pt(e,t,n){if(xt(e,"is:static"))return t;at.lastVisited=e;let i;for(const[s,r]of Array.from(kt(e)))if(s[0]===":")nn(e,s,r,n,t);else if(s==="@comp:this")i&&ve(),i={type:"comp:this",target:C(e),comp:r},I(e,s);else if(s[0]==="@"){const c=s.split(/[:(\[]/,1)[0].slice(1);tn(c)(e,s,r,t,n)}if(i)return t.push(i),t;for(const s of At(e))Pt(s,t,n);return t}o(Pt,"Walk");function Nt(e,t){const n=Ut(t.node);return Jt.trigger(e,t,n),n}o(Nt,"toDom");const sn={attrStart:/^[^'"=`<>\s]/,attrRest:/^[^'"=`<>\s]+/,lowerAttr:!1,lowerTag:!1};function Rt(e){e.meta.set("neocomp:id",Math.round(Math.random()*1e8));for(let t of e.children)t instanceof v&&Rt(t)}o(Rt,"initLiteNode");function ht(e,t=[],n={}){Rt(e);for(const r of t)r.onRoot&&r.onRoot(e);const i=at(e,n),s={node:e,actions:i};for(const r of t)r.onTemplate&&r.onTemplate(s);return s}o(ht,"generateFromLite");function on(e,t=[],n={}){const i={...sn};for(const h of t)h.onSource&&h.onSource(e,i);const s=Ge(e,i),r={};let c=0;for(const h of s.children){if(typeof h=="string")return le();const w=h.attrs.get("id");if(w||ue(h,c),h.tag==="neo:template")r[w]=ht(h,t,n);else{let m;for(const k of t)if(k.onSupplement&&(m=k.onSupplement(h.tag,h),m))break;m||pe(h,w),r[w]=m}c++}return r}o(on,"generateFromString");function rn(e,t=[],n={}){for(const s of t)s.onDom&&s.onDom(e);const i=Lt(e);return ht(i,t,n)}o(rn,"generateFromDom");const an=Object.freeze(Object.defineProperty({__proto__:null,generateFromDom:rn,generateFromLite:ht,generateFromString:on,toDom:Nt},Symbol.toStringTag,{value:"Module"}));class hn{static{o(this,"View")}constructor(t,n,i={}){this.refs={},this.onWalk=new g,this.onAction=new g,this.onCleanUp=new g,this.comp=t,this.options={...this.constructor.defaults,...i},this.el=n||this.options.defaultEl(t),this.comp.el=this.el,this.el[G]=t,this.comp.refs=this.refs,this.options.removeEl&&t.onRemove.on(()=>this.el.remove())}static{this.defaults={defaultEl(t){return document.createElement("div")},template:Ot("empty"),insertMode:"asDefault",into:void 0,walkInPreContent:!1,removeEl:!0}}initDom(){const t=this.el,n=this.options.template;this.options.walkInPreContent&&this.walk(t);let i;this.options.insertMode==="none"||this.options.insertMode==="asDefault"&&t.childNodes.length>0||(i=Nt(this.comp,n)),i&&this.doActions(n.actions,i,n.node);const s=this.options.insertMode;if(s==="replace")t.replaceChildren(...i.childNodes);else if(s==="asDefault"&&t.childNodes.length===0)t.append(...i.childNodes);else if(s==="atTop")t.prepend(...i.childNodes);else if(s==="atBottom")t.append(...i.childNodes);else if(s==="into"){if(this.options.into===void 0)return fe(this.comp);const r=P(this.options.into,this.el);r.length===0&&de(this.comp,this.options.into),r[0].replaceChildren(...i.childNodes)}}query(t){return P(t,this.el)}walk(t,n={}){n={inDom:!0,...n},this.onWalk.trigger(this,t,n),this.doActions(at(this.el,n))}doActions(t,n=this.el,i){this.onAction.trigger(this,n,t),i?Fe(this.comp,n,i,t):De(this.comp,t)}addRef(t,n){t in this.refs?this.refs[t].push(n):this.refs[t]=[n]}cleanup(){this.comp.store.dispatcher.remove(t=>!!t.meta.el&&!document.body.contains(t.meta.el)),this.onCleanUp.trigger(this)}}const G=Symbol("neocomp:attached-comp");class ct{static{o(this,"Component")}constructor(t,n={}){this.typemap=void 0,this.id="",this.status="preInit",this.onDomInit=new j,this.onInitInternal=new j,this.onInit=new j,this.store=void 0,this.view=void 0,this.refs=void 0,this.onLink=new g,this.onUnlink=new g,this.#e=new Set,this.onChildAdded=new g,this.onAddedToParent=new g,this.onUnlinkedFromParent=new g,this.onChildUnlink=new g,this.children=[],this.childmap={},this.onRemove=new g,this.options=this.constructor.defaults,this.#t=n,this.el=t,this.id=t?.id||this.options.defaultId(),this.options.initMode!=="fullControl"&&this.initCore(),this.options.initMode==="minimal"?(this.initDom(),this.init(),this.fireInit()):this.init()}#t;static{this.defaults={anonymous:!1,defaultId:o(()=>"","defaultId"),removeChildren:!0,initMode:"standared",store:{},view:{}}}initCore(){this.status!=="preInit"&&Q(this,"coreInit",this.status),this.status="coreInit",this.store=new It(this,this.options.store),this.view=new hn(this,this.el,this.options.view)}initDom(){this.status!=="coreInit"&&Q(this,"domInit",this.status),this.status="domInit",this.view.initDom(),this.onDomInit.trigger(this)}fireInit(){this.status!=="domInit"&&Q(this,"inited",this.status),this.status="inited",this.onInitInternal.trigger(this),this.onInit.trigger(this),this.options.anonymous||(Dt(this.id,this),jt.trigger(this))}init(){throw ie(this)}args(t){const n=this.el?.[q]||{},i=this.#t;return this.el&&delete this.el[q],this.#t=void 0,{...t,...i,...n}}get(t){return this.store.get(t)}set(t,n){this.store.set(t,n)}signal(t,n){return this.store.createSignal(t,n)}effect(t,n,i=[]){this.store.addEffect(t,n,i)}query(t){return this.view.query(t)}#e;link(t){this.#e.has(t)&&it(this,t),this.#e.add(t),this.onLink.trigger(this,t)}unlink(t){this.#e.has(t)||st(this,t),this.#e.delete(t),this.onUnlink.trigger(this,t)}linkTo(t){ot(this,t)}unlinkTo(t){rt(this,t)}hasLink(t){return this.#e.has(t)}addChild(t,n=-1){n===-1?this.children.push(t):this.children.splice(n,0,t),this.childmap[t.id]=t,this.onChildAdded.trigger(this,t),t.linkParent(this)}linkParent(t){this.parent&&se(this,this.parent),this.parent=t,this.onAddedToParent.trigger(this,t)}unlinkParent(){this.parent||oe(this),this.parent?.unlinkChild(this),this.onUnlinkedFromParent.trigger(this,this.parent),this.parent=void 0}unlinkChild(t){let n=this.children.length;this.children=this.children.filter(i=>i!==t),this.childmap[t.id]=void 0,n===this.children.length&&re(this,t),this.onChildUnlink.trigger(this,t)}remove(){if(this.status==="removed"&&ae(this),this.status!=="removing"){this.status="removing",this.onRemove.trigger(this);for(const t of this.#e)t.unlink(this),this.onUnlink.trigger(this,t);this.#e=new Set,this.parent&&(this.parent.unlinkChild(this),this.parent=void 0);for(const t of this.children)this.options.removeChildren?t.remove():t.unlinkParent();this.children=[],delete this.el[G],this.options.anonymous||(Ft(this.id),Vt.trigger(this)),E.root===this&&Bt(),this.status="removed"}}}const W=new Map;W.set("base",ct);const ft=new Map,nt=new Map;function cn(e,t){W.has(e)&&Qt(e),W.set(e,t),_t.trigger(e,t)}o(cn,"add");function Mt(e){return W.has(e)}o(Mt,"has");function dt(e){if(e[0]==="@"){const t=e.indexOf(":"),n=nt.get(e.slice(1,t));return n||Yt(e.slice(1,t)),n?.(e.slice(t+1))}return W.has(e)||Xt(e),W.get(e)}o(dt,"get");function Dt(e,t){ft.set(e,t)}o(Dt,"addToIdMap");function fn(e){return ft.get(e)}o(fn,"getById");function Ft(e){return ft.delete(e)}o(Ft,"removeFromIdMap");function Wt(e,t){nt.has(e)&&te(e),nt.set(e,t)}o(Wt,"addProvider");function dn(e){E.root&&ee(E.root,e),E.root=e,Zt.trigger(e)}o(dn,"setRoot");function Bt(){E.root||ne(),Gt.trigger(E.root),E.root?.remove(),E.root=void 0}o(Bt,"removeRoot");const E={root:void 0,add:cn,has:Mt,get:dt,addProvider:Wt,addToIdMap:Dt,getById:fn,removeFromIdMap:Ft,setRoot:dn,removeRoot:Bt};class En{static{o(this,"Context")}constructor(t={},n={}){this.onLink=new g,this.onUnlink=new g,this.#t=new Set,this.store=new It(this,n),this.store.setMultiple(t)}get(t){return this.store.get(t)}set(t,n){this.store.set(t,n)}has(t){return this.store.has(t)}signal(t,n){return this.store.createSignal(t,n)}effect(t,n,i=[],s){this.store.addEffect(t,n,i,s)}#t;link(t){this.#t.has(t)&&it(this,t),this.#t.add(t),this.onLink.trigger(this,t)}unlink(t){this.#t.has(t)||st(this,t),this.#t.delete(t),this.onUnlink.trigger(this,t)}hasLink(t){return this.#t.has(t)}unlinkAll(){for(const t of this.#t)rt(this,t)}}class ln{static{o(this,"LazyComp")}constructor(t,n,...i){this.onInit=new j,this.el=n,this.#t=i,n&&(n[G]=this),_t.on((s,r)=>{if(s!==t)return;const c=new r(this.el,...this.#t);E.root===this&&(E.root=c),this.onInit.trigger(c)})}#t}Wt("lazy",e=>Mt(e)?dt(e):function(t,...n){return new ln(e,t,...n)});function Cn(e){return new Proxy(e,un)}o(Cn,"$proxy");const un={get(e,t){return e.get(t)},set(e,t,n){return e.set(t,n),!0},has(e,t){return e.has(t)}},In={...an},Un={...$e},wt=Symbol("zro:has-visited");function pn(e,t){const n=P("a"+(t===""?"":`.${t}`));for(const i of n)i[wt]||i.href.startsWith(location.origin)&&(i.addEventListener("click",s=>{s.preventDefault(),e.go(i.href)}),i[wt]=!0)}o(pn,"attach");function gn(e,t,n){document.body.replaceChildren(...yt(`<div id=error-page style='color: red'>
	<h1>error: ${n instanceof Response?`${n.status} ${n.statusText}`:n.name} </h1>
	<div>url: ${t}</div>
	<div>${n instanceof Error?n.message:""}</div>
</div>`))}o(gn,"defaultErrorPage");const Z=o(e=>setTimeout(e,5),"defer");function wn(e,t,n){if(n.pathname!==e.lastURL.pathname)return mn(e,t,n);n.hash?t.scrollToHash&&Z(()=>P(n.hash)[0]?.scrollIntoView?.(t.scrollToHash)):t.noHashScrollToTop&&Z(()=>scroll(0,0)),t.hashIsSeparateEntry&&location.href!==n.href&&history.pushState(t.stateProvider(n),"",n)}o(wn,"handleRoute");async function mn(e,t,n){var i=void 0;e.onBeforeFetch.trigger(e,n,c=>i=c),i&&(n=i);const s=t.fetcher?await t.fetcher(n):await fetch(n).then(c=>c,c=>c);if(s instanceof Error||!s.ok)return yn(e,t,n,s);e.onAfterFetch.trigger(e,n,s);const r=new DOMParser().parseFromString(await s.text(),"text/html");location.href!==n.href&&history.pushState(t.stateProvider(n),"",n),t.transitions&&document.startViewTransition?document.startViewTransition(()=>mt(e,t,n,r)):mt(e,t,n,r)}o(mn,"startUpdate");function mt(e,t,n,i){e.onBeforeUpdate.trigger(e,n,i),_n(i,t);const s=t.preserveClass;for(const r of P(`.${s}`,document.body))P(`.${s}#${r.id}`,i.body)[0]?.replaceWith?.(r);document.body.replaceChildren(...i.body.childNodes),n.hash?t.scrollToHash&&Z(()=>P(n.hash)[0]?.scrollIntoView?.(t.scrollToHash)):Z(()=>scroll(0,0)),e.attachToDom(),e.onAfterUpdate.trigger(e,n)}o(mt,"handleUpdate");function yn(e,t,n,i){t.errorPage(e,n,i),e.onError.trigger(e,n,i),history.pushState(t.stateProvider(n),"",n)}o(yn,"onError");function qt(e){const t=document.createElement(e.tagName.toLowerCase());for(const n of e.attributes)t.setAttribute(n.name,n.value);return t.innerHTML=e.innerHTML,t}o(qt,"cloneElement");function _n(e,t){const n=document.head,{preserveTags:i,preserveClass:s,skipTags:r}=t,c=new Map;for(const h of n.children)c.has(h.tagName)?c.get(h.tagName)?.old.push(h):c.set(h.tagName,{old:[h],New:[]});for(const h of e.head.children)c.has(h.tagName)?c.get(h.tagName)?.New.push(h):c.set(h.tagName,{old:[],New:[h]});for(const[h,w]of c)if(!r.has(h))if(i.has(h))for(const m of w.New)w.old.some(k=>k.id===m.id)||n.append(qt(m));else vn(w,s)}o(_n,"updateHead");function vn(e,t){const n=document.head;for(const i of e.old)i.classList.contains(t)||i.remove();for(const i of e.New)i.classList.contains(t)&&e.old.some(s=>s.id===i.id)||n.append(qt(i))}o(vn,"updateOtherHeadEls");class Ln{static{o(this,"ZRORouter")}constructor(t){this.#t={},this.onAttach=new g,this.onRoute=new g,this.onBeforeFetch=new g,this.onAfterFetch=new g,this.onBeforeUpdate=new g,this.onAfterUpdate=new g,this.onError=new g,this.lastURL=new URL(location.href),this.#t={transitions:!1,interceptClass:"",preserveClass:"preserve-on-route",scrollToHash:{behavior:"smooth"},hashIsSeparateEntry:!0,noHashScrollToTop:!0,preserveTags:new Set(["script"]),skipTags:new Set,fetcher:void 0,stateProvider:o(()=>{},"stateProvider"),errorPage:gn,...t};const n=new Set;for(const s of this.#t.preserveTags)n.add(s.toUpperCase());this.#t.preserveTags=n;const i=new Set;for(const s of this.#t.skipTags)i.add(s.toUpperCase());this.#t.skipTags=i,window.addEventListener("popstate",()=>this.go(new URL(location.href)))}#t;go(t){var n=new URL(t,location.href);if(n.href===this.lastURL.href)var i;this.onRoute.trigger(this,n,s=>i=i===!1?!1:s),i!==!1&&(i instanceof URL&&(n=i),wn(this,this.#t,n),this.lastURL=n)}back(){history.back()}forward(){history.forward()}attachToDom(){pn(this,this.#t.interceptClass),this.onAttach.trigger(this)}}export{pt as $in,Pe as $inout,Cn as $proxy,f as CompError,ct as Component,En as Context,ln as LazyComp,Et as ReadOnlySignal,bn as Resource,ze as Signal,It as Store,He as UpdateDispatcher,hn as View,Ct as WriteOnlySignal,Ln as ZRORouter,R as addAction,H as addActionAttr,Y as apply,G as attachedComp,yt as construct,Sn as constructOne,$n as create,De as doActions,Fe as doActionsOfTemplate,Te as evalTAttr,An as from,ot as link,_t as onAdd,Kt as onAddTemplate,Jt as onConvertTemplate,jt as onNew,Vt as onRemove,Zt as onRootAdd,Gt as onRootRemove,be as parseTAttr,P as query,E as registry,In as tempGen,Tn as templates,rt as unlink,at as walk,Un as walkFns};
