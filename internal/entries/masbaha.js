var u=Object.defineProperty;var d=(c,e)=>u(c,"name",{value:e,configurable:!0});import{Component as i,registry as m}from'./libs.js';import{masbahat as n,saveMasbahat as s,prompt as p}from'./base.js';import{L as t}from"./chunks/node-CEhKUo8A.js";const r={download:{node:new t("neo:template",{id:"download"},[new t("div",{id:"title"},["مسبحة"],{"neocomp:id":18840903}),new t("button",{class:["button"]},["أضف"],{"neocomp:id":66628015}),new t("div",{id:"list"},[],{"neocomp:id":97647779})],{"neocomp:id":38197250}),actions:[{type:"on",target:66628015,events:["click"],fn:new Function("comp","el","event","comp.add()")},{type:"ref",target:97647779,name:"list"}]},item:{node:new t("neo:template",{id:"item"},[new t("span",{class:["info"]},[new t("span",{class:["name"]},["@{name}: "],{"neocomp:id":29289412}),new t("span",{class:["count"]},["@{count}"],{"neocomp:id":26949582})],{"neocomp:id":79217140}),new t("span",{class:["buttons"]},[new t("button",{class:["button"]},["نقص"],{"neocomp:id":52642448}),new t("button",{class:["button"]},["عدل"],{"neocomp:id":21636437}),new t("button",{class:["button"]},["حذف"],{"neocomp:id":24265189})],{"neocomp:id":31893735})],{"neocomp:id":42654481}),actions:[{type:"on",target:79217140,events:["click"],fn:new Function("comp","el","event","comp.count.value++")},{type:"attr",target:29289412,attr:"text",parts:["",{isExp:!1,prop:"name",static:!1},": "],staticProps:[],dynamicProps:[]},{type:"attr",target:26949582,attr:"text",parts:["",{isExp:!1,prop:"count",static:!1}],staticProps:[],dynamicProps:[]},{type:"on",target:52642448,events:["click"],fn:new Function("comp","el","event","comp.count.value = Math.max(0, comp.count.value-1)")},{type:"on",target:21636437,events:["click"],fn:new Function("comp","el","event","comp.change()")},{type:"on",target:24265189,events:["click"],fn:new Function("comp","el","event","comp.delete()")}]}};class l extends i{static{d(this,"Item")}static defaults={...i.defaults,view:{template:r.item,insertMode:"replace"},store:{addUndefined:!0},initMode:"minimal"};count=this.signal("count");name=this.signal("name");init(){this.el.classList.add("item"),this.effect(["count"],()=>{n[this.name.value]=this.count.value,s()})}async change(){const e=Math.max(Number(await p("العدد الجديد")),0);this.count.value=e,n[this.name.value]=e,s()}delete(){delete n[this.name.value],this.remove(),s()}}class h extends i{static{d(this,"Masbaha")}static defaults={...i.defaults,view:{template:r.download,insertMode:"into",into:"#inner-container"},store:{addUndefined:!0}};async init(){this.initDom(),this.fireInit();const e=this.refs.list[0];for(const o in n){const a=new l;a.store.setMultiple({name:o,count:n[o]}),this.addChild(a),e.append(a.el)}}update(){const e=this.refs.list[0];for(const o of this.children)o.remove();for(const o in n){const a=new l;a.store.setMultiple({name:o,count:n[o]}),this.addChild(a),e.append(a.el)}}async add(){const e=await p("الإسم");n[e]=0,this.update(),s()}}m.add("masbaha",h);m.add("masbaha.item",l);
