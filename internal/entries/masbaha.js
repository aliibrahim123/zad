var u=Object.defineProperty;var l=(c,e)=>u(c,"name",{value:e,configurable:!0});import{Component as i,registry as m}from'./libs.js';import{masbahat as n,saveMasbahat as s,prompt as p}from'./base.js';import{L as t}from"./chunks/node-BKieyWgd.js";const r={download:{node:new t("neo:template",{id:"download"},[new t("div",{id:"title"},["مسبحة"],{"neocomp:id":24653}),new t("button",{class:["button"]},["أضف"],{"neocomp:id":34033088}),new t("div",{id:"list"},[],{"neocomp:id":19443159})],{"neocomp:id":3165282}),actions:[{type:"on",target:34033088,events:["click"],fn:new Function("comp","el","event","comp.add()")},{type:"ref",target:19443159,name:"list"}]},item:{node:new t("neo:template",{id:"item"},[new t("span",{class:["info"]},[new t("span",{class:["name"]},["@{name}: "],{"neocomp:id":72604697}),new t("span",{class:["count"]},["@{count}"],{"neocomp:id":66939911})],{"neocomp:id":64488875}),new t("span",{class:["buttons"]},[new t("button",{class:["button"]},["نقص"],{"neocomp:id":74288450}),new t("button",{class:["button"]},["عدل"],{"neocomp:id":18088953}),new t("button",{class:["button"]},["حذف"],{"neocomp:id":84570733})],{"neocomp:id":79029093})],{"neocomp:id":49285663}),actions:[{type:"on",target:64488875,events:["click"],fn:new Function("comp","el","event","comp.count.value++")},{type:"attr",target:72604697,attr:"text",template:["",{isExp:!1,prop:"name",static:!1},": "],staticProps:[],dynamicProps:[]},{type:"attr",target:66939911,attr:"text",template:["",{isExp:!1,prop:"count",static:!1}],staticProps:[],dynamicProps:[]},{type:"on",target:74288450,events:["click"],fn:new Function("comp","el","event","comp.count.value = Math.max(0, comp.count.value-1)")},{type:"on",target:18088953,events:["click"],fn:new Function("comp","el","event","comp.change()")},{type:"on",target:84570733,events:["click"],fn:new Function("comp","el","event","comp.delete()")}]}};class d extends i{static{l(this,"Item")}static defaults={...i.defaults,view:{template:r.item,insertMode:"replace"},store:{addUndefined:!0},initMode:"minimal"};count=this.signal("count");name=this.signal("name");init(){this.el.classList.add("item"),this.effect(["count"],()=>{n[this.name.value]=this.count.value,s()})}async change(){const e=Math.max(Number(await p("العدد الجديد")),0);this.count.value=e,n[this.name.value]=e,s()}delete(){delete n[this.name.value],this.remove(),s()}}class h extends i{static{l(this,"Masbaha")}static defaults={...i.defaults,view:{template:r.download,insertMode:"into",into:"#inner-container"},store:{addUndefined:!0}};async init(){this.initDom(),this.fireInit();const e=this.refs.list[0];for(const o in n){const a=new d;a.store.setMultiple({name:o,count:n[o]}),this.addChild(a),e.append(a.el)}}update(){const e=this.refs.list[0];for(const o of this.children)o.remove();for(const o in n){const a=new d;a.store.setMultiple({name:o,count:n[o]}),this.addChild(a),e.append(a.el)}}async add(){const e=await p("الإسم");n[e]=0,this.update(),s()}}m.add("masbaha",h);m.add("masbaha.item",d);
