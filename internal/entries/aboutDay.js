var f=Object.defineProperty;var g=(m,t)=>f(m,"name",{value:t,configurable:!0});import{Component as l,create as r,registry as b}from'./libs.js';import{L as a}from"./chunks/node-BKieyWgd.js";import{adjustedToday as v,toHijri as k,toHijriString as S,getFahras as c}from'./base.js';const j={aboutDay:{node:new a("neo:template",{id:"aboutDay"},[new a("div",{id:"title"},["عن يوم (${dateString})"],{"neocomp:id":22444463}),new a("div",{id:"toolbar"},[new a("div",{class:["button"]},["تحديث الموقع"],{"neocomp:id":26936747}),new a("div",{class:["sep"]},["|"],{"neocomp:id":67160088}),new a("div",{class:["button"]},["أعمال اليوم من الاسبوع"],{"neocomp:id":61697536}),new a("div",{class:["sep"]},["|"],{"neocomp:id":54696318}),new a("div",{class:["button"]},["أعمال اليوم من الشهر"],{"neocomp:id":1905168})],{"neocomp:id":40293164}),new a("div",{class:["header"]},["مواقيت:"],{"neocomp:id":92490010}),new a("div",{id:"timings"},[],{"neocomp:id":51408820}),new a("div",{},[new a("div",{class:["header"]},["مناسبات:"],{"neocomp:id":8808987}),new a("div",{id:"monasabat"},["@{monasabat}"],{"neocomp:id":5858551})],{"neocomp:id":99330217})],{"neocomp:id":76287989}),actions:[{type:"attr",target:22444463,attr:"text",template:["عن يوم (",{isExp:!1,prop:"dateString",static:!0},")"],staticProps:[],dynamicProps:[]},{type:"on",target:26936747,events:["click"],fn:new Function("comp","el","event","comp.updateLocation()")},{type:"on",target:61697536,events:["click"],fn:new Function("comp","el","event","comp.goToWeekWork()")},{type:"on",target:1905168,events:["click"],fn:new Function("comp","el","event","comp.goToMonthWork()")},{type:"ref",target:51408820,name:"timings"},{type:"attr",target:99330217,attr:"class:hide",template:new Function("comp","el","return !comp.get('showMonasabat')"),staticProps:[],dynamicProps:[]},{type:"attr",target:5858551,attr:"text",template:["",{isExp:!1,prop:"monasabat",static:!1}],staticProps:[],dynamicProps:[]}]}},h=["مُحَرَّم","صَفَر","رَبِيع الْأَوَّل","رَبِيع الثَّانِي","جُمَادَى الْأُولَى","جُمَادَى الثَّانِيَة","رَجَب","شَعْبَان","رَمَضَان","شَوَّال","ذُو الْقَعْدَة","ذُو الْحِجَّة"],M=["الأحد","الأثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"];var s=JSON.parse(localStorage.getItem("location"));class $ extends l{static{g(this,"AboutDayPage")}static defaults={...l.defaults,view:{template:j.aboutDay,insertMode:"into",into:"#inner-container"},store:{addUndefined:!0}};async init(){const t=v(),e=k(t);this.set("hijri",e),this.set("dateString",S(t)),this.set("showMonasabat",!0),this.initDom(),(async()=>{const i=(await c("monasabat")).get(0)[h[e.month-1]][`اليوم (${e.day})`];this.set("showMonasabat",!!i),i&&this.set("monasabat",(await(await fetch(`./data/monasabat/${i}.json`)).json()).data)})(),(async()=>{s||await this.updateLocation();const n=t.getDate().toString().padStart(2,"0"),i=(t.getMonth()+1).toString().padStart(2,"0"),u=t.getFullYear().toString().padStart(4,"0"),w=[["latitude",s.latitude],["longitude",s.longitude],["method",10],["method",settings.timings.method],["safaq",settings.timings.safaq],["midnightMode",settings.timings.midnightMode],["latitudeAdjustmentMethod",settings.timings.latitudeAdjust]].map(d=>d.join("=")).join("&"),o=(await(await fetch(`https://api.aladhan.com/v1/timings/${n}-${i}-${u}?${w}`)).json()).data.timings,p={الفجر:o.Fajr||"00:00",الشروق:o.Sunrise||"00:00",الظهر:o.Dhuhr||"00:00",العصر:o.Asr||"00:00",الغروب:o.Sunset||"00:00",المغرب:o.Maghrib||"00:00",العشاء:o.Isha||"00:00",الإمساك:o.Imsak||"00:00","ثلث الليل الأول":o.Firstthird||"00:00","منتصف الليل":o.Midnight||"00:00","ثلث الليل الأخير":o.Lastthird||"00:00"},y=this.refs.timings[0];for(const d in p)y.append(r("div",".item",r("b",".timing",d),": ",r("span",".timing-value",p[d])))})(),this.fireInit()}async updateLocation(){const t=await new Promise(e=>navigator.geolocation.getCurrentPosition(n=>e(n.coords)));s={latitude:t.latitude,longitude:t.longitude},localStorage.setItem("location",JSON.stringify(s))}async goToWeekWork(){const e=(await c("osboa")).get(0)[M[new Date().getDay()]].$ind;router.go(`./fahras.html#osboa/${e}`)}async goToMonthWork(){const t=this.get("hijri"),n=(await c("months")).get(0)[h[t.month-1]][`اليوم (${t.day})`].$ind;n&&router.go(`./fahras.html#months/${n}`)}}b.add("about-day",$);
