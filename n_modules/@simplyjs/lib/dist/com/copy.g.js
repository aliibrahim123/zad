var O=Object.defineProperty;var a=(r,e)=>O(r,"name",{value:e,configurable:!0});var l=a((r,e,t)=>{var n=typeof r,u={};if(n!=="object"&&n!=="function"||r===null)return r;var i=r.constructor.name;if(n==="function"&&!e.function)return r;if(t.has(r))return t.get(r);var f=e.copiers[i];if(f){if(u=f(r,e,t),u===r)return r}else"Node"in globalThis&&r instanceof Node?u=s(r,e,t):(e.refs&&t.set(r,u),e.strict||o(r,u,e,t,i));return e.strict&&y(r,u,e,t,i),e.refs==="circular"&&t.delete(r),u},"handlecopy"),p={Array(r,e,t){var n=[];e.refs&&t.set(r,n);for(let u=0;u<r.length;u++)n[u]=l(r[u],e,t);return n},Function(r,e,t){var n=a(function(...u){return r.call(this,...u)},"clone");return e.refs&&t.set(r,n),n},Promise(r,e,t){if(!e.function)return r;var n=new Promise((u,i)=>{r.then(u),r.catch(i)});return e.refs&&t.set(r,n),n},AsyncFunction(r,e,t){var n=a(async function(...u){return r.call(this,...u)},"clone");return e.refs&&t.set(r,n),n},Date(r){return new Date(r)},RegExp(r){return new RegExp(r)},Map(r,e,t){var n=new Map;return e.refs&&t.set(r,n),r.forEach((u,i)=>{n.set(i,l(u,e,t))}),n},Set(r,e,t){var n=new Set;return e.refs&&t.set(r,n),r.forEach(u=>{n.add(l(u,e,t))}),n},WeakMap(r){return r},WeakSet(r){return r},Number(r,e,t){return e.toPrimitive?r.valueOf():new Number(r.valueOf())},String(r,e,t){return e.toPrimitive?r.valueOf():new String(r.valueOf())},Boolean(r,e,t){return e.toPrimitive?r.valueOf():new Boolean(r.valueOf())},BigInt(r,e,t){return e.toPrimitive?r.valueOf():new BigInt(r.valueOf())},Error(r){return r},AggregateError(r){return r},EvalError(r){return r},RangeError(r){return r},ReferenceError(r){return r},SyntaxError(r){return r},TypeError(r){return r},ArrayBuffer(r){return r.slice(0)},Float32Array(r){return r.slice(0)},Float64Array(r){return r.slice(0)},Int8Array(r){return r.slice(0)},Int16Array(r){return r.slice(0)},Int32Array(r){return r.slice(0)},Uint8Array(r){return r.slice(0)},Uint8ClampedArray(r){return r.slice(0)},Uint16Array(r){return r.slice(0)},Uint32Array(r){return r.slice(0)},Uint64Array(r){return r.slice(0)},Blob(r){return r.slice(0,r.size,r.type)},DataView(r){return new DataView(r.buffer.slice(0))}},s=a((r,e,t)=>{if(!e.domNode)return r;var n=r.cloneNode(!0);return d(r,n,e,t),n},"handleDom"),d=a((r,e,t,n)=>{n.set(r,e),r.nodeType===1&&Array.from(r.children).forEach((u,i)=>d(u,e.children[i],t,n)),t.domNodeProps&&(t.strict?y(r,e,t,n):o(r,e,t,n))},"handleDomNode"),o=a((r,e,t,n,u)=>{Object.keys(r).forEach(i=>{if(!t.skip.includes(i)){if(t.donotCopy.includes(i))return r[i];e[i]=l(r[i],t,n),u!=="Object"&&Object.setPrototypeOf(e,Object.getPrototypeOf(r))}})},"copyPropsNormal"),y=a((r,e,t,n,u)=>{t.refs&&n.set(r,e),Object.getOwnPropertyNames(r).forEach(i=>{if(i in e||t.skip.includes(i))return;let f=Object.getOwnPropertyDescriptor(r,i);if(t.donotCopy.includes(i)||!("value"in f))return Object.defineProperty(e,i,f);Object.defineProperty(e,i,{...f,value:l(f.value,t,n)})}),Object.getOwnPropertySymbols(r).forEach(i=>{if(i in e||t.skip.includes(i))return;let f=Object.getOwnPropertyDescriptor(r,i);if(t.donotCopy.includes(i)||!("value"in f))return Object.defineProperty(e,i,f);Object.defineProperty(e,i,{...f,value:l(f.value,t,n)})}),u!=="Object"&&Object.setPrototypeOf(e,Object.getPrototypeOf(r))},"copyPropsStrict");var c=a((r,e={})=>(e={...c.defaults,...e},l(r,e,new Map)),"$copy");c.defaults={strict:!1,refs:"circular",function:!1,toPrimitive:!0,copiers:p,skip:["caller","callee"],donotCopy:["prototype","arguments"],domNode:!1,domNodeProps:!1};c.dom=(r,e)=>(e={...c.defaults,domNode:!0,...e},s(r,e,new Map));var v=c;globalThis.$copy=v;var x=v;export{o as copyPropsNormal,y as copyPropsStrict,x as default,s as handleDom};
